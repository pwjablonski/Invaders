<!DOCTYPE html> <html><head>
        <title>Invaders</title>
    <style>#myCanvas {
 width: 400px;
 height: 400px;
 border: 1px solid black;
}</style></head>
    <body>
        <canvas id="myCanvas"> </canvas>
    

<script>
/*__POPCODESTART__*/
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
var x = canvas.width / 2;
var y = canvas.height - 30;
var paddleHeight = 5;
var paddleWidth = 25;
var paddleX = (canvas.width - paddleWidth) / 2;
var rightPressed = false;
var leftPressed = false;
var spacePressed = false;
var missles = [];
var missleHeight = 15;
var missleWidth = 5;
var invaders = [];
var invaderRowCount = 5;
var invaderColumnCount = 5;
var invaderWidth = 20;
var invaderHeight = 5;
var invaderPadding = 5;
var invaderOffsetTop = 5;
var invaderOffsetLeft = 30;
var invaderMovementDirection = -1;
var invaderMovementSpeed = .02;

for (var c = 0; c < invaderColumnCount; c++) {
  invaders[c] = [];

  for (var r = 0; r < invaderRowCount; r++) {
    invaders[c][r] = {
      x: 0,
      y: 0,
      status: 1
    };
  }
}

document.addEventListener("keydown", keyDownHandler, false);
document.addEventListener("keyup", keyUpHandler, false);

function detectMisslesHit() {
  for (var m = 0; m < missles.length; m++) {
    detectMissleHit(m);
  }
}

function detectMissleHit(m) {
  for (var _c = 0; _c < invaderColumnCount; _c++) {
    for (var _r = 0; _r < invaderRowCount; _r++) {
      var invader = invaders[_c][_r];

      if (invader.status === 1 && missles[m]) {
        if (missles[m].x > invader.x && missles[m].x < invader.x + invaderWidth && missles[m].y > invader.y && missles[m].y < invader.y + invaderHeight) {
          invader.status = 0;
          missles.splice(m, 1);
        }
      }
    }
  }
}

function drawInvaders() {
  for (var _c2 = 0; _c2 < invaderColumnCount; _c2++) {
    for (var _r2 = 0; _r2 < invaderRowCount; _r2++) {
      if (invaders[0][0].x <= 0) {
        invaderMovementDirection = 1;
      } else if (invaders[invaderColumnCount - 1][0].x + invaderWidth >= canvas.width) {
        invaderMovementDirection = -1;
      }

      invaderOffsetLeft += invaderMovementSpeed * invaderMovementDirection;
      invaders[_c2][_r2].x = _c2 * (invaderWidth + invaderPadding) + invaderOffsetLeft;
      invaders[_c2][_r2].y = _r2 * (invaderHeight + invaderPadding) + invaderOffsetTop;

      if (invaders[_c2][_r2].status === 1) {
        ctx.beginPath();
        ctx.rect(invaders[_c2][_r2].x, invaders[_c2][_r2].y, invaderWidth, invaderHeight);
        ctx.fillStyle = "#0095DD";
        ctx.fill();
        ctx.closePath();
      }
    }
  }
}

function drawPaddle() {
  if (rightPressed && paddleX < canvas.width - paddleWidth) {
    paddleX += 7;
  } else if (leftPressed && paddleX > 0) {
    paddleX -= 7;
  }

  ctx.beginPath();
  ctx.rect(paddleX, canvas.height - paddleHeight, paddleWidth, paddleHeight);
  ctx.fillStyle = "#0095DD";
  ctx.fill();
  ctx.closePath();
}

function drawMissles() {
  for (var i = 0; i < missles.length; i++) {
    if (missles[i].y < 0) {
      missles.splice(i, 1);
    } else {
      missles[i].y -= 1;
      drawMissle(missles[i].x, missles[i].y);
    }
  }
}

function drawMissle(x, y) {
  ctx.beginPath();
  ctx.rect(x, y, missleWidth, missleHeight);
  ctx.fillStyle = "#0095DD";
  ctx.fill();
  ctx.closePath();
}

function keyDownHandler(e) {
  if (e.key === "Right" || e.key === "ArrowRight") {
    rightPressed = true;
  } else if (e.key === "Left" || e.key === "ArrowLeft") {
    leftPressed = true;
  } else if (e.key === " ") {
    missles.push({
      x: paddleX + paddleWidth / 2,
      y: canvas.height - (missleHeight + paddleHeight)
    });
  }
}

function keyUpHandler(e) {
  if (e.key === "Right" || e.key === "ArrowRight") {
    rightPressed = false;
  } else if (e.key === "Left" || e.key === "ArrowLeft") {
    leftPressed = false;
  }
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawPaddle();
  drawMissles();
  drawInvaders();
  detectMisslesHit();
  requestAnimationFrame(draw);
}

requestAnimationFrame(draw);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvcGNvZGVQcmV2aWV3LmpzIl0sIm5hbWVzIjpbImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjdHgiLCJnZXRDb250ZXh0IiwieCIsIndpZHRoIiwieSIsImhlaWdodCIsInBhZGRsZUhlaWdodCIsInBhZGRsZVdpZHRoIiwicGFkZGxlWCIsInJpZ2h0UHJlc3NlZCIsImxlZnRQcmVzc2VkIiwic3BhY2VQcmVzc2VkIiwibWlzc2xlcyIsIm1pc3NsZUhlaWdodCIsIm1pc3NsZVdpZHRoIiwiaW52YWRlcnMiLCJpbnZhZGVyUm93Q291bnQiLCJpbnZhZGVyQ29sdW1uQ291bnQiLCJpbnZhZGVyV2lkdGgiLCJpbnZhZGVySGVpZ2h0IiwiaW52YWRlclBhZGRpbmciLCJpbnZhZGVyT2Zmc2V0VG9wIiwiaW52YWRlck9mZnNldExlZnQiLCJpbnZhZGVyTW92ZW1lbnREaXJlY3Rpb24iLCJpbnZhZGVyTW92ZW1lbnRTcGVlZCIsImMiLCJyIiwic3RhdHVzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImtleURvd25IYW5kbGVyIiwia2V5VXBIYW5kbGVyIiwiZGV0ZWN0TWlzc2xlc0hpdCIsIm0iLCJsZW5ndGgiLCJkZXRlY3RNaXNzbGVIaXQiLCJpbnZhZGVyIiwic3BsaWNlIiwiZHJhd0ludmFkZXJzIiwiYmVnaW5QYXRoIiwicmVjdCIsImZpbGxTdHlsZSIsImZpbGwiLCJjbG9zZVBhdGgiLCJkcmF3UGFkZGxlIiwiZHJhd01pc3NsZXMiLCJpIiwiZHJhd01pc3NsZSIsImUiLCJrZXkiLCJwdXNoIiwiZHJhdyIsImNsZWFyUmVjdCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsTUFBTSxHQUFHQyxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsVUFBeEIsQ0FBYjtBQUNBLElBQUlDLEdBQUcsR0FBR0gsTUFBTSxDQUFDSSxVQUFQLENBQWtCLElBQWxCLENBQVY7QUFDQSxJQUFJQyxDQUFDLEdBQUdMLE1BQU0s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LFdBQVcsR0FBRyxJQUFkO0FBQ0gsR0FGSSxNQUdBLElBQUdxQyxDQUFDLENBQUNDLEdBQUYsS0FBVSxHQUFiLEVBQWtCO0FBQ25CcEMsSUFBQUEsT0FBTyxDQUFDcUMsSUFBUixDQUFhO0FBQUMvQyxNQUFBQSxDQUFDLEVBQUVNLE9BQU8sR0FBR0QsV0FBVyxHQUFDLENBQTFCO0FBQTZCSCxNQUFBQSxDQUFDLEVBQUNQLE1BQU0sQ0FBQ1EsTUFBUCxJQUFlUSxZQUFZLEdBQUNQLFlBQTVCO0FBQS9CLEtBQWI7QUFDSDtBQUNKOztBQUVELFNBQVN3QixZQUFULENBQXNCaUIsQ0FBdEIsRUFBeUI7QUFDckIsTUFBR0EsQ0FBQyxDQUFDQyxHQUFGLEtBQVUsT0FBVixJQUFxQkQsQ0FBQyxDQUFDQyxHQUFGLEtBQVUsWUFBbEMsRUFBZ0Q7QUFDNUN2QyxJQUFBQSxZQUFZLEdBQUcsS0FBZjtBQUNILEdBRkQsTUFHSyxJQUFHc0MsQ0FBQyxDQUFDQyxHQUFGLEtBQVUsTUFBVixJQUFvQkQsQ0FBQyxDQUFDQyxHQUFGLEtBQVUsV0FBakMsRUFBOEM7QUFDL0N0QyxJQUFBQSxXQUFXLEdBQUcsS0FBZDtBQUNIO0FBQ0o7O0FBRUQsU0FBU3dDLElBQVQsR0FBZ0I7QUFDWmxELEVBQUFBLEdBQUcsQ0FBQ21ELFNBQUosQ0FBYyxDQUFkLEVBQWlCLENBQWpCLEVBQW9CdEQsTUFBTSxDQUFDTSxLQUEzQixFQUFrQ04sTUFBTSxDQUFDUSxNQUF6QztBQUNBc0MsRUFBQUEsVUFBVTtBQUNWQyxFQUFBQSxXQUFXO0FBQ1hQLEVBQUFBLFlBQVk7QUFDWk4sRUFBQUEsZ0JBQWdCO0FBQ2hCcUIsRUFBQUEscUJBQXFCLENBQUNGLElBQUQsQ0FBckI7QUFDSDs7QUFFREUscUJBQXFCLENBQUNGLElBQUQsQ0FBckIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteUNhbnZhc1wiKTtcbnZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xudmFyIHggPSBjYW52YXMud2lkdGgvMjtcbnZhciB5ID0gY2FudmFzLmhlaWdodC0zMDtcbnZhciBwYWRkbGVIZWlnaHQgPSA1O1xudmFyIHBhZGRsZVdpZHRoID0gMjU7XG52YXIgcGFkZGxlWCA9IChjYW52YXMud2lkdGgtcGFkZGxlV2lkdGgpLzI7XG52YXIgcmlnaHRQcmVzc2VkID0gZmFsc2U7XG52YXIgbGVmdFByZXNzZWQgPSBmYWxzZTtcbnZhciBzcGFjZVByZXNzZWQgPSBmYWxzZTtcblxudmFyIG1pc3NsZXMgPSBbXTtcbnZhciBtaXNzbGVIZWlnaHQgPSAxNTtcbnZhciBtaXNzbGVXaWR0aCA9IDU7XG5cbnZhciBpbnZhZGVycyA9IFtdO1xudmFyIGludmFkZXJSb3dDb3VudCA9IDU7XG52YXIgaW52YWRlckNvbHVtbkNvdW50ID0gNTtcbnZhciBpbnZhZGVyV2lkdGggPSAyMDtcbnZhciBpbnZhZGVySGVpZ2h0ID0gNTtcbnZhciBpbnZhZGVyUGFkZGluZyA9IDU7XG52YXIgaW52YWRlck9mZnNldFRvcCA9IDU7XG52YXIgaW52YWRlck9mZnNldExlZnQgPSAzMDtcbnZhciBpbnZhZGVyTW92ZW1lbnREaXJlY3Rpb24gPSAtMTtcbnZhciBpbnZhZGVyTW92ZW1lbnRTcGVlZCA9IC4wMjtcblxuZm9yKGxldCBjPTA7IGM8aW52YWRlckNvbHVtbkNvdW50OyBjKyspIHtcbiAgICBpbnZhZGVyc1tjXSA9IFtdO1xuICAgIGZvcihsZXQgcj0wOyByPGludmFkZXJSb3dDb3VudDsgcisrKSB7XG4gICAgICAgIGludmFkZXJzW2NdW3JdID0geyB4OiAwLCB5OiAwLCBzdGF0dXM6IDEgfTtcbiAgICB9XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGtleURvd25IYW5kbGVyLCBmYWxzZSk7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwga2V5VXBIYW5kbGVyLCBmYWxzZSk7XG5cblxuZnVuY3Rpb24gZGV0ZWN0TWlzc2xlc0hpdCgpe1xuICAgIGZvcihsZXQgbT0wOyBtPG1pc3NsZXMubGVuZ3RoOyBtKyspIHtcbiAgICAgIGRldGVjdE1pc3NsZUhpdChtKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRldGVjdE1pc3NsZUhpdChtKXtcbiAgICBmb3IobGV0IGM9MDsgYzxpbnZhZGVyQ29sdW1uQ291bnQ7IGMrKykge1xuICAgICAgICBmb3IobGV0IHI9MDsgcjxpbnZhZGVyUm93Q291bnQ7IHIrKykge1xuICAgICAgICAgIGxldCBpbnZhZGVyID0gaW52YWRlcnNbY11bcl07XG4gICAgICAgICAgaWYoaW52YWRlci5zdGF0dXMgPT09IDEgJiYgbWlzc2xlc1ttXSkge1xuICAgICAgICAgICAgaWYoIFxuICAgICAgICAgICAgICAgIG1pc3NsZXNbbV0ueCA+IGludmFkZXIueCAmJiBcbiAgICAgICAgICAgICAgICBtaXNzbGVzW21dLnggPCBpbnZhZGVyLngraW52YWRlcldpZHRoICYmXG4gICAgICAgICAgICAgICAgbWlzc2xlc1ttXS55ID4gaW52YWRlci55ICYmXG4gICAgICAgICAgICAgICAgbWlzc2xlc1ttXS55IDwgaW52YWRlci55K2ludmFkZXJIZWlnaHRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpbnZhZGVyLnN0YXR1cyA9IDA7XG4gICAgICAgICAgICAgIG1pc3NsZXMuc3BsaWNlKG0sIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gICBcbn1cblxuZnVuY3Rpb24gZHJhd0ludmFkZXJzKCkge1xuICAgIGZvcihsZXQgYz0wOyBjPGludmFkZXJDb2x1bW5Db3VudDsgYysrKSB7XG4gICAgICAgIGZvcihsZXQgcj0wOyByPGludmFkZXJSb3dDb3VudDsgcisrKSB7XG4gICAgICAgICAgICBpZihpbnZhZGVyc1swXVswXS54IDw9IDApe1xuICAgICAgICAgICAgICAgICAgICBpbnZhZGVyTW92ZW1lbnREaXJlY3Rpb24gPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnZhZGVyc1tpbnZhZGVyQ29sdW1uQ291bnQtMV1bMF0ueCArIGludmFkZXJXaWR0aCA+PSBjYW52YXMud2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWRlck1vdmVtZW50RGlyZWN0aW9uID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnZhZGVyT2Zmc2V0TGVmdCArPSBpbnZhZGVyTW92ZW1lbnRTcGVlZCAqIGludmFkZXJNb3ZlbWVudERpcmVjdGlvbjtcbiAgICAgICAgICAgIGludmFkZXJzW2NdW3JdLnggPSAoYyooaW52YWRlcldpZHRoK2ludmFkZXJQYWRkaW5nKSkraW52YWRlck9mZnNldExlZnQ7XG4gICAgICAgICAgICBpbnZhZGVyc1tjXVtyXS55ID0gKHIqKGludmFkZXJIZWlnaHQraW52YWRlclBhZGRpbmcpKStpbnZhZGVyT2Zmc2V0VG9wO1xuICAgICAgICAgICAgaWYgKGludmFkZXJzW2NdW3JdLnN0YXR1cyA9PT0gMSl7XG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIGN0eC5yZWN0KGludmFkZXJzW2NdW3JdLngsIGludmFkZXJzW2NdW3JdLnksIGludmFkZXJXaWR0aCwgaW52YWRlckhlaWdodCk7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiIzAwOTVERFwiO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgfSAgXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYXdQYWRkbGUoKSB7XG4gICAgaWYocmlnaHRQcmVzc2VkICYmIHBhZGRsZVggPCBjYW52YXMud2lkdGgtcGFkZGxlV2lkdGgpIHtcbiAgICAgICAgcGFkZGxlWCArPSA3O1xuICAgIH1cbiAgICBlbHNlIGlmKGxlZnRQcmVzc2VkICYmIHBhZGRsZVggPiAwKSB7XG4gICAgICAgIHBhZGRsZVggLT0gNztcbiAgICB9XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5yZWN0KHBhZGRsZVgsIGNhbnZhcy5oZWlnaHQtcGFkZGxlSGVpZ2h0LCBwYWRkbGVXaWR0aCwgcGFkZGxlSGVpZ2h0KTtcbiAgICBjdHguZmlsbFN0eWxlID0gXCIjMDA5NUREXCI7XG4gICAgY3R4LmZpbGwoKTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG59XG5cblxuZnVuY3Rpb24gZHJhd01pc3NsZXMoKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaTxtaXNzbGVzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgaWYgKG1pc3NsZXNbaV0ueSA8IDApIHtcbiAgICAgICAgICAgIG1pc3NsZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWlzc2xlc1tpXS55IC09IDE7XG4gICAgICAgICAgICBkcmF3TWlzc2xlKG1pc3NsZXNbaV0ueCwgbWlzc2xlc1tpXS55KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhd01pc3NsZSh4LCB5KXtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4LnJlY3QoeCwgeSwgbWlzc2xlV2lkdGgsIG1pc3NsZUhlaWdodCk7XG4gICAgY3R4LmZpbGxTdHlsZSA9IFwiIzAwOTVERFwiO1xuICAgIGN0eC5maWxsKCk7XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xufVxuXG5mdW5jdGlvbiBrZXlEb3duSGFuZGxlcihlKSB7XG4gICAgaWYoZS5rZXkgPT09IFwiUmlnaHRcIiB8fCBlLmtleSA9PT0gXCJBcnJvd1JpZ2h0XCIpIHtcbiAgICAgICAgcmlnaHRQcmVzc2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZihlLmtleSA9PT0gXCJMZWZ0XCIgfHwgZS5rZXkgPT09IFwiQXJyb3dMZWZ0XCIpIHtcbiAgICAgICAgbGVmdFByZXNzZWQgPSB0cnVlO1xuICAgIH0gXG4gICAgZWxzZSBpZihlLmtleSA9PT0gXCIgXCIpIHtcbiAgICAgICAgbWlzc2xlcy5wdXNoKHt4OiBwYWRkbGVYICsgcGFkZGxlV2lkdGgvMiwgeTpjYW52YXMuaGVpZ2h0LShtaXNzbGVIZWlnaHQrcGFkZGxlSGVpZ2h0KX0gKTtcbiAgICB9ICBcbn1cblxuZnVuY3Rpb24ga2V5VXBIYW5kbGVyKGUpIHtcbiAgICBpZihlLmtleSA9PT0gXCJSaWdodFwiIHx8IGUua2V5ID09PSBcIkFycm93UmlnaHRcIikge1xuICAgICAgICByaWdodFByZXNzZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgZWxzZSBpZihlLmtleSA9PT0gXCJMZWZ0XCIgfHwgZS5rZXkgPT09IFwiQXJyb3dMZWZ0XCIpIHtcbiAgICAgICAgbGVmdFByZXNzZWQgPSBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYXcoKSB7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgIGRyYXdQYWRkbGUoKTtcbiAgICBkcmF3TWlzc2xlcygpO1xuICAgIGRyYXdJbnZhZGVycygpO1xuICAgIGRldGVjdE1pc3NsZXNIaXQoKTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhdyk7XG59XG5cbnJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3KTsiXX0=</script></body></html>